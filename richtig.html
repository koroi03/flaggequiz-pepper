<richtig>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flaggen-Quiz</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            text-align: center;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background-color: #4CAF50;
            color: white;
            margin: 0;
        }

        h1 {
            margin: 0;
            flex-grow: 1; /* Allows the title to take available space */
        }

        #exit-quiz-button {
            padding: 8px 15px;
            background-color: #f44336; /* Red color for exit */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap; /* Prevent button text from wrapping */
            transition: background-color 0.3s ease;
        }

        #exit-quiz-button:hover {
            background-color: #d32f2f;
        }

        #flag-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .flag-item img {
            width: 200px;
            height: auto;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        #options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .option-button {
            padding: 10px 20px;
            margin: 5px 10px;
            background-color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .option-button:hover {
            background-color: #4CAF50;
            color: white;
        }

        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        #feedback {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            min-height: 30px; /* Ensures space even when empty */
        }

        #results-container {
            display: none; /* Hidden until quiz ends */
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            margin: 20px auto; /* Center the results container */
            max-width: 500px; /* Limit width for better readability */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        #results-container p {
            font-size: 18px;
            margin-bottom: 10px;
        }

        #results-container button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        #results-container button:hover {
            background-color: #388e3c;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .flag-item img {
                width: 100%; /* Make flag image full width on small screens */
            }
            .option-button {
                width: calc(50% - 20px); /* Two buttons per row on small screens */
            }
            #exit-quiz-button {
                font-size: 12px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Flaggen-Quiz</h1>
        <button id="exit-quiz-button">Quiz beenden</button>
    </header>

    <div id="flag-container">
        </div>
    <div id="options-container">
        </div>
    <div id="feedback">
        </div>

    <div id="results-container">
        <h2>Ergebnisse</h2>
        <p>Deine Punktzahl: <span id="final-score"></span> von <span id="total-questions"></span></p>
        <button id="restart-quiz">Quiz Neustarten</button>
    </div>

     <audio id="correctSound" preload="auto">
        <source src="sounds/correct.mp3" type="audio/mpeg">
    </audio>
    <audio id="incorrectSound" preload="auto">
        <source src="sounds/incorrect.mp3" type="audio/mpeg">
    </audio>

    <script>
        const flagsData = [
    { country: "Deutschland", flagImage: "flags/de.png" }, 
    { country: "Frankreich", flagImage: "flags/fr.png" },
    { country: "Japan", flagImage: "flags/jp.png" },       
    { country: "Vereinigte Staaten", flagImage: "flags/us.png" },
    { country: "Kanada", flagImage: "flags/ca.png" },
    { country: "Brasilien", flagImage: "flags/br.png" },
    { country: "Indien", flagImage: "flags/in.png" },
    { country: "Australien", flagImage: "flags/au.png" },
    { country: "China", flagImage: "flags/cn.png" },
    { country: "Russland", flagImage: "flags/ru.png" },
    { country: "Mexiko", flagImage: "flags/mx.png" },
    { country: "Südafrika", flagImage: "flags/za.png" },
    { country: "Argentinien", flagImage: "flags/ar.png" },
    { country: "Italien", flagImage: "flags/it.png" },
    { country: "Spanien", flagImage: "flags/es.png" },
    { country: "Südkorea", flagImage: "flags/kr.png" },
    { country: "Türkei", flagImage: "flags/tr.png" },
    { country: "Saudi-Arabien", flagImage: "flags/sa.png" },
    { country: "Indonesien", flagImage: "flags/id.png" },
    { country: "Ägypten", flagImage: "flags/eg.png" },
    { country: "Nigeria", flagImage: "flags/ng.png" },
    { country: "Schweden", flagImage: "flags/se.png" },
    { country: "Niederlande", flagImage: "flags/nl.png" },
    { country: "Belgien", flagImage: "flags/be.png" },
    { country: "Schweiz", flagImage: "flags/ch.png" },
];
        // Shuffle the flagsData array once at the beginning to randomize question order
        const shuffledFlagsData = shuffleArray([...flagsData]);

        const flagContainer = document.getElementById("flag-container");
        const optionsContainer = document.getElementById("options-container");
        const feedback = document.getElementById("feedback");
        const resultsContainer = document.getElementById("results-container");
        const finalScoreDisplay = document.getElementById("final-score");
        const totalQuestionsDisplay = document.getElementById("total-questions");
        const restartQuizButton = document.getElementById("restart-quiz");
        const exitQuizButton = document.getElementById("exit-quiz-button");

        let currentQuestionIndex = 0;
        let score = 0;
        let currentQuestion;

        function displayQuestion() {
            if (currentQuestionIndex >= shuffledFlagsData.length) {
                showResults();
                return;
            }

            flagContainer.innerHTML = "";
            optionsContainer.innerHTML = "";
            feedback.textContent = "";

            currentQuestion = shuffledFlagsData[currentQuestionIndex];

            const img = document.createElement("img");
            img.src = currentQuestion.flagImage;
            img.alt = `Flagge von ${currentQuestion.country}`;
            img.classList.add("flag-item"); // Add a class for potential styling
            flagContainer.appendChild(img);

            const correctAnswer = currentQuestion.country;
            // Generate 3 wrong answers from the *original* flagsData to ensure variety
            const choices = [correctAnswer, ...generateWrongAnswers(correctAnswer, flagsData)];
            shuffleArray(choices); // Shuffle the choices for the buttons

            choices.forEach(choice => {
                const button = document.createElement("button");
                button.className = "option-button";
                button.textContent = choice;
                button.onclick = () => checkAnswer(choice);
                optionsContainer.appendChild(button);
            });
        }

        function generateWrongAnswers(correctAnswer, allFlags) {
            const allCountries = allFlags.map(flag => flag.country);
            const wrongAnswersPool = allCountries.filter(country => country !== correctAnswer);
            return shuffleArray(wrongAnswersPool).slice(0, 3); // Take 3 random wrong answers
        }

        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            // While there remain elements to shuffle.
            while (currentIndex !== 0) {
                // Pick a remaining element.
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                // And swap it with the current element.
                [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        function checkAnswer(selectedAnswer) {
            optionsContainer.querySelectorAll(".option-button").forEach(button => {
                button.disabled = true; // Disable all buttons after an answer
            });

            if (selectedAnswer === currentQuestion.country) {
                feedback.textContent = "Richtig!";
                feedback.style.color = "#4CAF50"; // Green for correct
                score++;
            } else {
                feedback.textContent = `Falsch! Die richtige Antwort war: ${currentQuestion.country}`;
                feedback.style.color = "#f44336"; // Red for incorrect
            }

            // Automatically go to the next question after a short delay
            setTimeout(nextQuestion, 2000); // 2000 milliseconds = 2 seconds
        }

        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion(); // Calls displayQuestion, which handles showing results if quiz is over
        }

        function showResults() {
            flagContainer.style.display = "none";
            optionsContainer.style.display = "none";
            feedback.style.display = "none";
            exitQuizButton.style.display = "none"; // Hide exit button on results screen

            resultsContainer.style.display = "block";
            finalScoreDisplay.textContent = score;
            totalQuestionsDisplay.textContent = shuffledFlagsData.length; // Display total questions
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            shuffleArray(shuffledFlagsData); // Reshuffle for a new quiz order
            flagContainer.style.display = "flex";
            optionsContainer.style.display = "flex";
            feedback.style.display = "block";
            exitQuizButton.style.display = "inline-block"; // Show exit button again
            resultsContainer.style.display = "none";
            displayQuestion();
        }

        // Function to end the quiz immediately and show results
        function endQuiz() {
            showResults();
        }

        // Event Listeners
        restartQuizButton.addEventListener("click", restartQuiz);
        exitQuizButton.addEventListener("click", endQuiz);

        // Initial display of the first question
        displayQuestion();
    </script>
</body>
</html>
